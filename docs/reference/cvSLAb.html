<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate cross-validated risk for the super learner fit to antibody data — cvSLAb • tmleAb</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">tmleAb</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/tmleAb-vignette.html">tmleAb vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/ben-arnold/tmleAb">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate cross-validated risk for the super learner fit to antibody data</h1>
    </div>

    
    <p>A convenience wrapper for <code><a href='http://www.rdocumentation.org/packages/SuperLearner/topics/CV.SuperLearner'>CV.SuperLearner</a></code> for antibody measurements.</p>
    

    <pre class="usage"><span class='fu'>cvSLAb</span>(<span class='no'>Y</span>, <span class='no'>X</span>, <span class='kw'>id</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fu'>length</span>(<span class='no'>Y</span>), <span class='kw'>V</span> <span class='kw'>=</span> <span class='fl'>10</span>, <span class='kw'>SL.library</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"SL.mean"</span>, <span class='st'>"SL.glm"</span>,
  <span class='st'>"SL.bayesglm"</span>, <span class='st'>"SL.loess"</span>, <span class='st'>"SL.gam"</span>, <span class='st'>"SL.randomForest"</span>), <span class='kw'>RFnodesize</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>gamdf</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Y</th>
      <td><p>Antibody measurement. Must be a numeric vector.</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>A vector, matrix, or data.frame of covariates for each individual used to predict antibody levels</p></td>
    </tr>
    <tr>
      <th>id</th>
      <td><p>An optional cluster or repeated measures id variable. For cross-validation splits, <code>id</code> forces observations in the same cluster or for the same individual to be in the same validation fold.</p></td>
    </tr>
    <tr>
      <th>V</th>
      <td><p>Number of folds to use in the cross validation (default is 10)</p></td>
    </tr>
    <tr>
      <th>SL.library</th>
      <td><p>Library of algorithms to include in the ensemble (see the <code><a href='http://www.rdocumentation.org/packages/SuperLearner/topics/SuperLearner'>SuperLearner</a></code> package for details).</p></td>
    </tr>
    <tr>
      <th>RFnodesize</th>
      <td><p>Optional argument to specify a range of minimum node sizes for the random forest algorithm. If <code>SL.library</code> includes <code>SL.randomForest</code>, then the default is to search over node sizes of 15,20,...40. Specifying this option will override the default.</p></td>
    </tr>
    <tr>
      <th>gamdf</th>
      <td><p>Optional argument to specify a range of degrees of freedom for natural smoothing splines in a generalized additive model. If <code>SL.library</code> includes <code>SL.gam</code>, then the default is to search over degrees of freedom 2,3,...10. Specifying this option will override the default.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>This function returns an object of class <code>CV.SuperLearner</code> (see the <code><a href='http://www.rdocumentation.org/packages/SuperLearner/topics/SuperLearner'>SuperLearner</a></code> package for details)</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The SuperLearner function builds a estimator, but does not contain an estimate on the performance of the estimator. Various methods exist for estimator performance evaluation. If you are familiar with the super learner algorithm, it should be no surprise we recommend using cross-validation to evaluate the honest performance of the super learner estimator. The function <code>cvSLAb</code> provides a convenient wrapper for the <code>CV.SuperLearner</code> routine to compute the V-fold cross-validated risk estimate for the super learner (and all algorithms in <code>SL.library</code> for comparison). The wrapper adds convenience by restricting the dataset to complete cases, transforming the covariate matrix (<code>W</code>) into a data.frame, and allowing the user to tune parameters in the Random Forest and GAM libraries if they are included in <code>SL.library</code>. It assumes a continuous outcome (<code>family=gaussian()</code>), but can be run on binary outcomes without problems.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='tmleAb.html'>tmleAb</a></code>, <code><a href='http://www.rdocumentation.org/packages/SuperLearner/topics/SuperLearner'>SuperLearner</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># load the Garki project serology data, subset to round 5 intervention</span>
<span class='fu'>data</span>(<span class='st'>"garki_sero"</span>)
<span class='no'>garki_sero</span>$<span class='no'>village</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>garki_sero</span>$<span class='no'>village</span>)
<span class='no'>garki_sero</span>$<span class='no'>sex</span> <span class='kw'>&lt;-</span> <span class='fu'>factor</span>(<span class='no'>garki_sero</span>$<span class='no'>sex</span>)
<span class='no'>garki_sero</span>$<span class='no'>tr01</span> <span class='kw'>&lt;-</span> <span class='fu'>ifelse</span>(<span class='no'>garki_sero</span>$<span class='no'>tr</span><span class='kw'>==</span><span class='st'>"Intervention"</span>,<span class='fl'>1</span>,<span class='fl'>0</span>)
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'>subset</span>(<span class='no'>garki_sero</span>,<span class='no'>serosvy</span><span class='kw'>==</span><span class='fl'>5</span> <span class='kw'>&amp;</span> <span class='no'>tr</span><span class='kw'>==</span><span class='st'>"Intervention"</span>)

<span class='co'># fit the cross-validated super learner</span>
<span class='co'># with just Age as the predictor</span>
<span class='fu'>set.seed</span>(<span class='fl'>62522</span>)
<span class='no'>CVfit</span> <span class='kw'>&lt;-</span> <span class='fu'>cvSLAb</span>(<span class='kw'>Y</span><span class='kw'>=</span><span class='fu'>log10</span>(<span class='no'>d</span>$<span class='no'>ifatpftitre</span>+<span class='fl'>1</span>),<span class='kw'>X</span><span class='kw'>=</span><span class='fu'>data.frame</span>(<span class='kw'>Age</span><span class='kw'>=</span><span class='no'>d</span>$<span class='no'>ageyrs</span>),<span class='kw'>id</span><span class='kw'>=</span><span class='no'>d</span>$<span class='no'>id</span>)

<span class='co'># plot cross-validated MSE ("Risk")</span>
<span class='fu'>plot</span>(<span class='no'>CVfit</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Ben Arnold, Kunal Mishra, Mark van der Laan, Alan Hubbard.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
